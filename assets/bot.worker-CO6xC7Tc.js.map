{"version":3,"file":"bot.worker-CO6xC7Tc.js","sources":["../../wasm/pkg/htmf_wasm.js","../src/constants.ts","../src/Bot.ts","../src/bot.worker.ts"],"sourcesContent":["let wasm;\n\nconst cachedTextDecoder = (typeof TextDecoder !== 'undefined' ? new TextDecoder('utf-8', { ignoreBOM: true, fatal: true }) : { decode: () => { throw Error('TextDecoder not available') } } );\n\nif (typeof TextDecoder !== 'undefined') { cachedTextDecoder.decode(); };\n\nlet cachedUint8ArrayMemory0 = null;\n\nfunction getUint8ArrayMemory0() {\n    if (cachedUint8ArrayMemory0 === null || cachedUint8ArrayMemory0.buffer !== wasm.memory.buffer) {\n        cachedUint8ArrayMemory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8ArrayMemory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return cachedTextDecoder.decode(getUint8ArrayMemory0().slice(ptr, ptr + len));\n}\n\nconst heap = new Array(128).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction getObject(idx) { return heap[idx]; }\n\nfunction dropObject(idx) {\n    if (idx < 132) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n/**\n* This function only exists when you compile without multithreading support!\n*\n* This function does nothing; it's just a stub function to match\n* `wasm_bindgen_rayon::init_thread_pool`, which exists when you do compile with\n* multithreading support.\n* @param {number} _num_threads\n* @returns {Promise<any>}\n*/\nexport function initThreadPool(_num_threads) {\n    const ret = wasm.initThreadPool(_num_threads);\n    return takeObject(ret);\n}\n\nlet cachedDataViewMemory0 = null;\n\nfunction getDataViewMemory0() {\n    if (cachedDataViewMemory0 === null || cachedDataViewMemory0.buffer !== wasm.memory.buffer) {\n        cachedDataViewMemory0 = new DataView(wasm.memory.buffer);\n    }\n    return cachedDataViewMemory0;\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return getUint8ArrayMemory0().subarray(ptr / 1, ptr / 1 + len);\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst cachedTextEncoder = (typeof TextEncoder !== 'undefined' ? new TextEncoder('utf-8') : { encode: () => { throw Error('TextEncoder not available') } } );\n\nconst encodeString = function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n};\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length, 1) >>> 0;\n        getUint8ArrayMemory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len, 1) >>> 0;\n\n    const mem = getUint8ArrayMemory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3, 1) >>> 0;\n        const view = getUint8ArrayMemory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n        ptr = realloc(ptr, len, offset, 1) >>> 0;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        wasm.__wbindgen_exn_store(addHeapObject(e));\n    }\n}\n\nconst GameFinalization = (typeof FinalizationRegistry === 'undefined')\n    ? { register: () => {}, unregister: () => {} }\n    : new FinalizationRegistry(ptr => wasm.__wbg_game_free(ptr >>> 0, 1));\n/**\n*/\nexport class Game {\n\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(Game.prototype);\n        obj.__wbg_ptr = ptr;\n        GameFinalization.register(obj, obj.__wbg_ptr, obj);\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        GameFinalization.unregister(this);\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_game_free(ptr, 0);\n    }\n    /**\n    * @returns {Game}\n    */\n    static new() {\n        const ret = wasm.game_new();\n        return Game.__wrap(ret);\n    }\n    /**\n    * @returns {boolean}\n    */\n    is_drafting() {\n        const ret = wasm.game_is_drafting(this.__wbg_ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {boolean}\n    */\n    finished_drafting() {\n        const ret = wasm.game_finished_drafting(this.__wbg_ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {boolean}\n    */\n    game_over() {\n        const ret = wasm.game_game_over(this.__wbg_ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {number | undefined}\n    */\n    active_player() {\n        const ret = wasm.game_active_player(this.__wbg_ptr);\n        return ret === 0xFFFFFF ? undefined : ret;\n    }\n    /**\n    * @param {number} player\n    * @returns {number}\n    */\n    score(player) {\n        const ret = wasm.game_score(this.__wbg_ptr, player);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    turn() {\n        const ret = wasm.game_turn(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @param {number} idx\n    * @returns {number}\n    */\n    num_fish(idx) {\n        const ret = wasm.game_num_fish(this.__wbg_ptr, idx);\n        return ret >>> 0;\n    }\n    /**\n    * @param {number} player\n    * @returns {Uint8Array}\n    */\n    penguins(player) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.game_penguins(retptr, this.__wbg_ptr, player);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            var v1 = getArrayU8FromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 1, 1);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {number} player\n    * @returns {Uint8Array}\n    */\n    claimed(player) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.game_claimed(retptr, this.__wbg_ptr, player);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            var v1 = getArrayU8FromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 1, 1);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {Uint8Array}\n    */\n    draftable_cells() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.game_draftable_cells(retptr, this.__wbg_ptr);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            var v1 = getArrayU8FromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 1, 1);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {number} src\n    * @returns {Uint8Array}\n    */\n    possible_moves(src) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.game_possible_moves(retptr, this.__wbg_ptr, src);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            var v1 = getArrayU8FromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 1, 1);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {number} dst\n    */\n    place_penguin(dst) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.game_place_penguin(retptr, this.__wbg_ptr, dst);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {number} src\n    * @param {number} dst\n    */\n    move_penguin(src, dst) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.game_move_penguin(retptr, this.__wbg_ptr, src, dst);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    */\n    playout() {\n        wasm.game_playout(this.__wbg_ptr);\n    }\n    /**\n    * @param {number} n\n    */\n    playout_n_times(n) {\n        wasm.game_playout_n_times(this.__wbg_ptr, n);\n    }\n    /**\n    * @returns {number}\n    */\n    get_total_playouts() {\n        const ret = wasm.game_get_total_playouts(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    get_visits() {\n        const ret = wasm.game_get_visits(this.__wbg_ptr);\n        return ret;\n    }\n    /**\n    *\n    *     * Number of times we've tried and won by placing a penguin at `dst` on the current board\n    *\n    * @param {number} dst\n    * @returns {MoveInfo}\n    */\n    place_info(dst) {\n        const ret = wasm.game_place_info(this.__wbg_ptr, dst);\n        return MoveInfo.__wrap(ret);\n    }\n    /**\n    *\n    *     * Number of times we've tried and won by moving a penguin from `src` to `dst` on the current\n    *     * board\n    *\n    * @param {number} src\n    * @param {number} dst\n    * @returns {MoveInfo}\n    */\n    move_info(src, dst) {\n        const ret = wasm.game_move_info(this.__wbg_ptr, src, dst);\n        return MoveInfo.__wrap(ret);\n    }\n    /**\n    */\n    take_action() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.game_take_action(retptr, this.__wbg_ptr);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {number}\n    */\n    tree_size() {\n        const ret = wasm.game_tree_size(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n}\n\nconst MoveInfoFinalization = (typeof FinalizationRegistry === 'undefined')\n    ? { register: () => {}, unregister: () => {} }\n    : new FinalizationRegistry(ptr => wasm.__wbg_moveinfo_free(ptr >>> 0, 1));\n/**\n*/\nexport class MoveInfo {\n\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(MoveInfo.prototype);\n        obj.__wbg_ptr = ptr;\n        MoveInfoFinalization.register(obj, obj.__wbg_ptr, obj);\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        MoveInfoFinalization.unregister(this);\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_moveinfo_free(ptr, 0);\n    }\n    /**\n    * @returns {number}\n    */\n    get_visits() {\n        const ret = wasm.moveinfo_get_visits(this.__wbg_ptr);\n        return ret;\n    }\n    /**\n    * @returns {number}\n    */\n    get_rewards() {\n        const ret = wasm.moveinfo_get_rewards(this.__wbg_ptr);\n        return ret;\n    }\n}\n\nasync function __wbg_load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n\n            } catch (e) {\n                if (module.headers.get('Content-Type') != 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n\n        } else {\n            return instance;\n        }\n    }\n}\n\nfunction __wbg_get_imports() {\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbindgen_string_new = function(arg0, arg1) {\n        const ret = getStringFromWasm0(arg0, arg1);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_object_drop_ref = function(arg0) {\n        takeObject(arg0);\n    };\n    imports.wbg.__wbg_new_abda76e883ba8a5f = function() {\n        const ret = new Error();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_stack_658279fe44541cf6 = function(arg0, arg1) {\n        const ret = getObject(arg1).stack;\n        const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len1 = WASM_VECTOR_LEN;\n        getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\n        getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\n    };\n    imports.wbg.__wbg_error_f851667af71bcfc6 = function(arg0, arg1) {\n        let deferred0_0;\n        let deferred0_1;\n        try {\n            deferred0_0 = arg0;\n            deferred0_1 = arg1;\n            console.error(getStringFromWasm0(arg0, arg1));\n        } finally {\n            wasm.__wbindgen_free(deferred0_0, deferred0_1, 1);\n        }\n    };\n    imports.wbg.__wbg_crypto_1d1f22824a6a080c = function(arg0) {\n        const ret = getObject(arg0).crypto;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_is_object = function(arg0) {\n        const val = getObject(arg0);\n        const ret = typeof(val) === 'object' && val !== null;\n        return ret;\n    };\n    imports.wbg.__wbg_process_4a72847cc503995b = function(arg0) {\n        const ret = getObject(arg0).process;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_versions_f686565e586dd935 = function(arg0) {\n        const ret = getObject(arg0).versions;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_node_104a2ff8d6ea03a2 = function(arg0) {\n        const ret = getObject(arg0).node;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_is_string = function(arg0) {\n        const ret = typeof(getObject(arg0)) === 'string';\n        return ret;\n    };\n    imports.wbg.__wbg_require_cca90b1a94a0255b = function() { return handleError(function () {\n        const ret = module.require;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbindgen_is_function = function(arg0) {\n        const ret = typeof(getObject(arg0)) === 'function';\n        return ret;\n    };\n    imports.wbg.__wbg_msCrypto_eb05e62b530a1508 = function(arg0) {\n        const ret = getObject(arg0).msCrypto;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_randomFillSync_5c9c955aa56b6049 = function() { return handleError(function (arg0, arg1) {\n        getObject(arg0).randomFillSync(takeObject(arg1));\n    }, arguments) };\n    imports.wbg.__wbg_getRandomValues_3aa56aa6edec874c = function() { return handleError(function (arg0, arg1) {\n        getObject(arg0).getRandomValues(getObject(arg1));\n    }, arguments) };\n    imports.wbg.__wbg_newnoargs_76313bd6ff35d0f2 = function(arg0, arg1) {\n        const ret = new Function(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_call_1084a111329e68ce = function() { return handleError(function (arg0, arg1) {\n        const ret = getObject(arg0).call(getObject(arg1));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbindgen_object_clone_ref = function(arg0) {\n        const ret = getObject(arg0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_self_3093d5d1f7bcb682 = function() { return handleError(function () {\n        const ret = self.self;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_window_3bcfc4d31bc012f8 = function() { return handleError(function () {\n        const ret = window.window;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_globalThis_86b222e13bdf32ed = function() { return handleError(function () {\n        const ret = globalThis.globalThis;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_global_e5a3fe56f8be9485 = function() { return handleError(function () {\n        const ret = global.global;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbindgen_is_undefined = function(arg0) {\n        const ret = getObject(arg0) === undefined;\n        return ret;\n    };\n    imports.wbg.__wbg_call_89af060b4e1523f2 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = getObject(arg0).call(getObject(arg1), getObject(arg2));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_resolve_570458cb99d56a43 = function(arg0) {\n        const ret = Promise.resolve(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_buffer_b7b08af79b0b0974 = function(arg0) {\n        const ret = getObject(arg0).buffer;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_newwithbyteoffsetandlength_8a2cb9ca96b27ec9 = function(arg0, arg1, arg2) {\n        const ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_new_ea1883e1e5e86686 = function(arg0) {\n        const ret = new Uint8Array(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_set_d1e79e2388520f18 = function(arg0, arg1, arg2) {\n        getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n    };\n    imports.wbg.__wbg_newwithlength_ec548f448387c968 = function(arg0) {\n        const ret = new Uint8Array(arg0 >>> 0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_subarray_7c2e3576afe181d1 = function(arg0, arg1, arg2) {\n        const ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_throw = function(arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n    imports.wbg.__wbindgen_memory = function() {\n        const ret = wasm.memory;\n        return addHeapObject(ret);\n    };\n\n    return imports;\n}\n\nfunction __wbg_init_memory(imports, memory) {\n    imports.wbg.memory = memory || new WebAssembly.Memory({initial:18,maximum:16384,shared:true});\n}\n\nfunction __wbg_finalize_init(instance, module, thread_stack_size) {\n    wasm = instance.exports;\n    __wbg_init.__wbindgen_wasm_module = module;\n    cachedDataViewMemory0 = null;\n    cachedUint8ArrayMemory0 = null;\n\nif (typeof thread_stack_size !== 'undefined' && (typeof thread_stack_size !== 'number' || thread_stack_size === 0 || thread_stack_size % 65536 !== 0)) { throw 'invalid stack size' }\nwasm.__wbindgen_start(thread_stack_size);\nreturn wasm;\n}\n\nfunction initSync(module, memory) {\n    if (wasm !== undefined) return wasm;\n\n    let thread_stack_size\n    if (typeof module !== 'undefined' && Object.getPrototypeOf(module) === Object.prototype)\n    ({module, memory, thread_stack_size} = module)\n    else\n    console.warn('using deprecated parameters for `initSync()`; pass a single object instead')\n\n    const imports = __wbg_get_imports();\n\n    __wbg_init_memory(imports, memory);\n\n    if (!(module instanceof WebAssembly.Module)) {\n        module = new WebAssembly.Module(module);\n    }\n\n    const instance = new WebAssembly.Instance(module, imports);\n\n    return __wbg_finalize_init(instance, module, thread_stack_size);\n}\n\nasync function __wbg_init(module_or_path, memory) {\n    if (wasm !== undefined) return wasm;\n\n    let thread_stack_size\n    if (typeof module_or_path !== 'undefined' && Object.getPrototypeOf(module_or_path) === Object.prototype)\n    ({module_or_path, memory, thread_stack_size} = module_or_path)\n    else\n    console.warn('using deprecated parameters for the initialization function; pass a single object instead')\n\n    if (typeof module_or_path === 'undefined') {\n        module_or_path = new URL('htmf_wasm_bg.wasm', import.meta.url);\n    }\n    const imports = __wbg_get_imports();\n\n    if (typeof module_or_path === 'string' || (typeof Request === 'function' && module_or_path instanceof Request) || (typeof URL === 'function' && module_or_path instanceof URL)) {\n        module_or_path = fetch(module_or_path);\n    }\n\n    __wbg_init_memory(imports, memory);\n\n    const { instance, module } = await __wbg_load(await module_or_path, imports);\n\n    return __wbg_finalize_init(instance, module, thread_stack_size);\n}\n\nexport { initSync };\nexport default __wbg_init;\n","export const NPLAYERS = 2;\nexport const HUMAN_PLAYER = 0;\nexport const BOT_PLAYER = 1;\nexport const NUM_ROWS = 8;\nexport const EVEN_ROW_LEN = 7;\nexport const ODD_ROW_LEN = 8;\nexport const NUM_CELLS =\n  EVEN_ROW_LEN * (NUM_ROWS / 2) + ODD_ROW_LEN * (NUM_ROWS / 2);\n\nexport const PLAYOUT_CHUNK_SIZE = 200;\nexport const MIN_PLAYOUTS = 14_000;\nexport const MAX_PLAYOUTS = 60_000;\n","import * as wasm from \"htmf-wasm\";\n\nimport {\n  NPLAYERS,\n  NUM_CELLS,\n  MIN_PLAYOUTS,\n  MAX_PLAYOUTS,\n  HUMAN_PLAYER,\n  BOT_PLAYER,\n  PLAYOUT_CHUNK_SIZE,\n} from \"./constants\";\nimport {\n  type GameState,\n  type MoveScore,\n  type WorkerRequest,\n  type WorkerResponse,\n} from \"./WorkerProtocol\";\n\nfunction getGameState(game: wasm.Game): GameState {\n  const fish = [];\n  for (let idx = 0; idx < NUM_CELLS; ++idx) {\n    fish.push(game.num_fish(idx));\n  }\n  const scores: number[] = [];\n  const penguins = [];\n  const claimed = [];\n  for (let p = 0; p < NPLAYERS; ++p) {\n    scores.push(game.score(p));\n    penguins.push([...game.penguins(p)]);\n    claimed.push([...game.claimed(p)]);\n  }\n  return {\n    activePlayer: game.active_player(),\n    modeType: game.finished_drafting() ? \"playing\" : \"drafting\",\n    scores,\n    turn: game.turn(),\n    board: {\n      fish,\n      penguins,\n      claimed,\n    },\n  };\n}\n\nfunction getPossibleMoves(game: wasm.Game, src?: number): number[] {\n  if (game.active_player() !== HUMAN_PLAYER) {\n    return [];\n  }\n  if (game.finished_drafting()) {\n    if (src !== undefined) {\n      return [...game.possible_moves(src)];\n    }\n    const activePlayer = game.active_player();\n    return activePlayer === undefined ? [] : [...game.penguins(activePlayer)];\n  } else {\n    return [...game.draftable_cells()];\n  }\n}\n\nclass Bot {\n  wasmInternals: wasm.InitOutput;\n  game: wasm.Game = wasm.Game.new();\n  postMessage: (msg: WorkerResponse) => void;\n  ponderer?: number;\n  ponderStartTime?: number;\n  totalCompletedPonderTimeMs: number = 0;\n\n  constructor(\n    wasmInternals: wasm.InitOutput,\n    postMessage: (msg: WorkerResponse) => void,\n  ) {\n    this.wasmInternals = wasmInternals;\n    this.postMessage = postMessage;\n    this.ponder();\n    this.postGameState({});\n  }\n\n  free(): void {\n    this.stopPondering();\n    this.game.free();\n    this.totalCompletedPonderTimeMs = 0;\n  }\n\n  ponder(): void {\n    if (this.ponderer !== undefined) {\n      return;\n    }\n    this.ponderStartTime = performance.now();\n    this.ponderer = self.setInterval(() => {\n      const activePlayer = this.game.active_player();\n      if (\n        this.game.get_visits() >= MAX_PLAYOUTS ||\n        activePlayer === BOT_PLAYER\n      ) {\n        this.stopPondering();\n        return;\n      }\n\n      this.game.playout_n_times(PLAYOUT_CHUNK_SIZE);\n\n      if (activePlayer !== undefined) {\n        this.postThinkingProgress({\n          activePlayer,\n          playoutsNeeded: MAX_PLAYOUTS,\n        });\n      }\n    });\n  }\n\n  stopPondering(): void {\n    if (this.ponderer !== undefined) {\n      clearInterval(this.ponderer);\n      this.ponderer = undefined;\n    }\n    if (this.ponderStartTime !== undefined) {\n      this.totalCompletedPonderTimeMs +=\n        performance.now() - this.ponderStartTime;\n      this.ponderStartTime = undefined;\n    }\n  }\n\n  placePenguin(dst: number): void {\n    this.game.place_penguin(dst);\n    this.ponder();\n  }\n\n  movePenguin(src: number, dst: number): void {\n    this.game.move_penguin(src, dst);\n    this.ponder();\n  }\n\n  playout(): void {\n    this.game.playout();\n  }\n\n  takeAction(): void {\n    const playoutsNeeded =\n      this.game.turn() < 2 ? 2 * MIN_PLAYOUTS : MIN_PLAYOUTS;\n    let lastIntervalTime = performance.now();\n    while (this.game.get_visits() < playoutsNeeded) {\n      this.game.playout_n_times(PLAYOUT_CHUNK_SIZE);\n      this.totalCompletedPonderTimeMs += performance.now() - lastIntervalTime;\n      lastIntervalTime = performance.now();\n\n      const activePlayer = this.game.active_player();\n      if (activePlayer !== undefined) {\n        this.postThinkingProgress({ activePlayer, playoutsNeeded });\n      }\n    }\n    this.totalCompletedPonderTimeMs += performance.now() - lastIntervalTime;\n    lastIntervalTime = performance.now();\n\n    this.game.take_action();\n    this.postGameState({});\n    this.ponder();\n  }\n\n  getState(): GameState {\n    return getGameState(this.game);\n  }\n\n  getPossibleMoves(src?: number): number[] {\n    return getPossibleMoves(this.game, src);\n  }\n\n  onMessage(request: WorkerRequest): void {\n    console.log(`received request ${request.type}`);\n    let src;\n    let lastMoveWasIllegal = false;\n    switch (request.type) {\n      case \"getGameState\":\n        break;\n      case \"movePenguin\":\n        try {\n          if (request.src === undefined) {\n            this.placePenguin(request.dst);\n          } else {\n            this.movePenguin(request.src, request.dst);\n          }\n        } catch (err) {\n          void err;\n          lastMoveWasIllegal = true;\n        }\n        break;\n      case \"getPossibleMoves\":\n        src = request.src;\n        break;\n    }\n    this.postGameState({ src, lastMoveWasIllegal });\n    while (this.game.active_player() === BOT_PLAYER) {\n      this.takeAction();\n    }\n  }\n\n  postGameState({\n    src,\n    lastMoveWasIllegal,\n  }: {\n    src?: number;\n    lastMoveWasIllegal?: boolean;\n  }): void {\n    lastMoveWasIllegal = lastMoveWasIllegal === true;\n    const postMessage = this.postMessage;\n    postMessage({\n      type: \"gameState\",\n      gameState: this.getState(),\n      possibleMoves: this.getPossibleMoves(src),\n      lastMoveWasIllegal,\n    });\n  }\n\n  postThinkingProgress({\n    activePlayer,\n    playoutsNeeded,\n  }: {\n    activePlayer: number;\n    playoutsNeeded: number;\n  }): void {\n    const postMessage = this.postMessage;\n    postMessage({\n      type: \"thinkingProgress\",\n      completed: this.game.get_visits(),\n      required: playoutsNeeded,\n      totalPlayouts: this.game.get_total_playouts(),\n      totalTimeThinkingMs: this.getTotalTimeThinkingMs(),\n      memoryUsage: this.wasmInternals.memory.buffer.byteLength,\n      treeSize: this.game.tree_size(),\n      playerMoveScores: {\n        player: activePlayer,\n        moveScores: this.getMoveScores(activePlayer),\n      },\n    });\n  }\n\n  getMoveScores(activePlayer: number): MoveScore[] {\n    const moveScores: MoveScore[] = [];\n    if (this.game.is_drafting()) {\n      for (const dst of this.game.draftable_cells()) {\n        const info = this.game.place_info(dst);\n        moveScores.push({\n          dst,\n          visits: info.get_visits(),\n          rewards: info.get_rewards(),\n        });\n      }\n    } else {\n      for (const src of this.game.penguins(activePlayer)) {\n        for (const dst of this.game.possible_moves(src)) {\n          const info = this.game.move_info(src, dst);\n          moveScores.push({\n            src,\n            dst,\n            visits: info.get_visits(),\n            rewards: info.get_rewards(),\n          });\n        }\n      }\n    }\n    return moveScores;\n  }\n\n  getTotalTimeThinkingMs(): number {\n    let totalTimeThinkingMs = this.totalCompletedPonderTimeMs;\n    if (this.ponderStartTime !== undefined) {\n      totalTimeThinkingMs += performance.now() - this.ponderStartTime;\n    }\n    return totalTimeThinkingMs;\n  }\n}\n\nexport default Bot;\n","import Bot from \"./Bot\";\nimport htmfWasmInit, * as htmfWasm from \"htmf-wasm\";\nimport type { WorkerRequest } from \"./WorkerProtocol\";\n\n// Run WebAssembly.instantiateStreaming() to load and initialize the WebAssembly module\nconst memory = new WebAssembly.Memory({\n  initial: 18,\n  maximum: 16384,\n  shared: true,\n});\nconst wasmInternals = await htmfWasmInit({ memory });\n\n// Initialize a pool with one WebWorker per available core\nawait htmfWasm.initThreadPool(navigator.hardwareConcurrency);\n\nconst bot = new Bot(wasmInternals, postMessage);\nonmessage = (event: MessageEvent<WorkerRequest>) => {\n  bot.onMessage(event.data);\n};\n\nexport {};\n"],"names":["wasm","cachedTextDecoder","cachedUint8ArrayMemory0","getUint8ArrayMemory0","getStringFromWasm0","ptr","len","heap","heap_next","addHeapObject","obj","idx","getObject","dropObject","takeObject","ret","initThreadPool","_num_threads","cachedDataViewMemory0","getDataViewMemory0","getArrayU8FromWasm0","WASM_VECTOR_LEN","cachedTextEncoder","encodeString","arg","view","buf","passStringToWasm0","malloc","realloc","mem","offset","code","handleError","f","args","e","GameFinalization","Game","player","retptr","r0","r1","v1","src","dst","n","MoveInfo","MoveInfoFinalization","__wbg_load","module","imports","bytes","instance","__wbg_get_imports","arg0","arg1","ptr1","len1","deferred0_0","deferred0_1","val","arg2","__wbg_init_memory","memory","__wbg_finalize_init","thread_stack_size","__wbg_init","module_or_path","NPLAYERS","HUMAN_PLAYER","BOT_PLAYER","NUM_ROWS","EVEN_ROW_LEN","ODD_ROW_LEN","NUM_CELLS","PLAYOUT_CHUNK_SIZE","MIN_PLAYOUTS","MAX_PLAYOUTS","getGameState","game","fish","scores","penguins","claimed","p","getPossibleMoves","activePlayer","Bot","wasm.Game","wasmInternals","postMessage","playoutsNeeded","lastIntervalTime","request","lastMoveWasIllegal","moveScores","info","totalTimeThinkingMs","htmfWasmInit","htmfWasm.initThreadPool","bot","event"],"mappings":"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"}