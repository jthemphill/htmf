(self.webpackChunkhtmf=self.webpackChunkhtmf||[]).push([[423],{505:function(e,t,s){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,s,a){void 0===a&&(a=s),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,a){void 0===a&&(a=s),e[a]=t[s]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&a(t,e,s);return l(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(s(294)),r=i(s(605)),c=s(209);t.default=o.memo((function(e){const t=62.5,s=new Map;for(let t of[c.HUMAN_PLAYER,c.BOT_PLAYER])for(let a of e.gameState.board.penguins[t])s.set(a,t);const a=e.possibleMoves.length>0,l=new Set([]);for(let t of e.gameState.board.claimed)for(let e of t)l.add(e);const n=[];for(let i=0;i<c.NUM_ROWS;++i){const u=125+1.5*i*t,h=i%2==0?c.EVEN_ROW_LEN:c.ODD_ROW_LEN,d=i%2*-1*Math.sqrt(3)*t/2;for(let i=0;i<h;++i){const c=125+i*(t*(Math.sin(Math.PI/3)-Math.sin(5*Math.PI/3)))+d,h=n.length,f=e.gameState.board.fish[h],m=e.possibleMoves.includes(h),p=a&&e.chosenCell===h;n.push(o.createElement(r.default,{key:h,_key:h,onClick:e.handleCellClick,fish:f,cx:c,cy:u,sideLength:t,highlighted:p,possible:m,player:s.get(h),claimed:l.has(h)}))}}return o.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",className:"board",viewBox:"0 0 1000 1000"},n)}))},605:function(e,t,s){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,s,a){void 0===a&&(a=s),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,a){void 0===a&&(a=s),e[a]=t[s]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&a(t,e,s);return l(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(s(294)),r=i(s(56));function c(e){const t=[];for(let s=0;s<6;++s)t.push(u(e,s));return t}function u(e,t){const s=e.sideLength,a=t*Math.PI/3;return[s*Math.sin(a),s*Math.cos(a)]}t.default=o.memo((function(e){const t=`translate(${e.cx},${e.cy})`,s=e.player;if(null==s&&e.claimed)return o.createElement("g",{transform:t},o.createElement("polygon",{points:c(e).join(" "),className:"cell claimed"}));let a=null,l=null;null!=s?a=o.createElement(r.default,{player:s,size:e.sideLength}):l=function(e){const t=e.sideLength/10;if(1===e.fish)return[o.createElement("circle",{key:0,className:"fish",r:t})];if(2===e.fish)return[o.createElement("circle",{key:0,className:"fish",cx:2*-t,r:t}),o.createElement("circle",{key:1,className:"fish",cx:2*t,r:t})];if(3===e.fish){const e=2*t*Math.sin(Math.PI/3);return[o.createElement("circle",{key:0,className:"fish",cx:2*-t,cy:e,r:t}),o.createElement("circle",{key:1,className:"fish",cx:2*t,cy:e,r:t}),o.createElement("circle",{key:2,className:"fish",cx:0,cy:-e,r:t})]}throw new Error(e.fish+" is not a valid fish amount")}(e);const n=["cell"];return e.highlighted?n.push("highlighted"):e.possible&&n.push("possible"),o.createElement("g",{transform:t,onClick:()=>e.onClick(e._key)},o.createElement("polygon",{className:n.join(" "),points:c(e).join(" ")}),l,a)}))},56:function(e,t,s){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,s,a){void 0===a&&(a=s),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,a){void 0===a&&(a=s),e[a]=t[s]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&a(t,e,s);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(294)),o=s(209);t.default=i.memo((function(e){let t=void 0;e.player==o.HUMAN_PLAYER?t="human":e.player==o.BOT_PLAYER&&(t="bot");const s="penguin "+t,a=e.size/500;return i.createElement("g",{transform:`scale(${a}),translate(-307.62496,-350)`},i.createElement("g",{transform:"matrix(2.0165499,0,0,2.0165499,-378.20444,-374.28247)"},i.createElement("g",{transform:"translate(0,-14)",className:"penguin leftFoot"},i.createElement("rect",{className:"penguin foot",width:"18.182745",height:"72.73098",x:"340.37064",y:"378.86526"}),i.createElement("path",{className:"penguin foot",d:"m 347.12481,446.95339 -60.42857,21.85714 45.71428,18.57143 26.14286,-35.78572 z"})),i.createElement("g",{transform:"matrix(-1,0,0,1,745.35258,-14)",className:"penguin rightFoot"},i.createElement("rect",{y:"378.86526",x:"340.37064",height:"72.73098",width:"18.182745",className:"penguin foot"}),i.createElement("path",{d:"m 347.12481,446.95339 -60.42857,21.85714 45.71428,18.57143 26.14286,-35.78572 z",className:"penguin foot"})),i.createElement("path",{transform:"matrix(0.59003831,0,0,0.59003831,186.08628,108.73722)",d:"m 446.48743,416.47116 c 0,72.80489 -58.79389,131.82491 -131.31983,131.82491 -72.52593,0 -131.31982,-59.02002 -131.31982,-131.82491 0,-72.80488 58.79389,-131.8249 131.31982,-131.8249 72.52594,0 131.31983,59.02002 131.31983,131.8249 z",className:s}),i.createElement("path",{transform:"translate(59.910095,0)",d:"m 361.63462,289.69702 c 0,27.3367 -22.16077,49.49748 -49.49747,49.49748 -27.3367,0 -49.49748,-22.16078 -49.49748,-49.49748 0,-27.3367 22.16078,-49.49747 49.49748,-49.49747 27.3367,0 49.49747,22.16077 49.49747,49.49747 z",className:s}),i.createElement("path",{d:"m 345.78328,275.11088 c 0,0 6.9297,-6 26.26396,-6 19.33426,0 26.26397,6 26.26397,6 l -26.26397,52.52793 z",className:"penguin beak"}),i.createElement("path",{transform:"translate(0,-8)",className:"penguin eyes",d:"m 369.46331,266.71603 c 0,5.43945 -4.40955,9.84899 -9.84899,9.84899 -5.43945,0 -9.84899,-4.40954 -9.84899,-9.84899 0,-5.43944 4.40954,-9.84898 9.84899,-9.84898 5.43944,0 9.84899,4.40954 9.84899,9.84898 z"}),i.createElement("path",{transform:"translate(0,-8)",d:"m 391.93917,269.36768 c 0,3.55656 -2.88316,6.43972 -6.43972,6.43972 -3.55656,0 -6.43972,-2.88316 -6.43972,-6.43972 0,-3.55656 2.88316,-6.43973 6.43972,-6.43973 3.55656,0 6.43972,2.88317 6.43972,6.43973 z",className:"penguin eyes"}),i.createElement("path",{d:"M 332.14074,297.03867 247.29889,260.5461 c 10.94712,32.37883 32.49618,64.01962 75.63693,75.93783 z",className:s}),i.createElement("path",{className:s,d:"M 411.95375,297.03867 496.7956,260.5461 c -10.94712,32.37883 -32.49618,64.01962 -75.63693,75.93783 z"})))}))},423:function(e,t,s){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(s(294)),n=a(s(935)),i=a(s(505)),o=s(209);class r extends l.default.Component{constructor(e){super(e),this.handleCellClick=this._handleCellClick.bind(this),this.worker=new Worker("./bot.worker.js"),this.worker.onmessage=this.onMessage.bind(this),this.state={}}activePlayer(){var e;return null===(e=this.state.gameState)||void 0===e?void 0:e.activePlayer}render(){var e,t;const s=this.state.lastMoveInvalid?"Invalid move!":null,a=[],n=this.activePlayer();for(let t=0;t<o.NPLAYERS;++t){let s={color:o.PLAYER_COLORS[t]},i=n===t?"(Active Player)":null;a.push(l.default.createElement("p",{key:"score_"+t},l.default.createElement("span",{style:s},"Score: ",null===(e=this.state.gameState)||void 0===e?void 0:e.scores[t]," ",i)))}let r=null;return this.state.gameState&&(r=l.default.createElement(i.default,{gameState:this.state.gameState,possibleMoves:this.state.possibleMoves||[],chosenCell:this.state.chosenCell,handleCellClick:this.handleCellClick})),l.default.createElement("div",{className:"app"},r,l.default.createElement("div",{className:"info-col"},l.default.createElement("p",null,null===(t=this.state.gameState)||void 0===t?void 0:t.modeType),l.default.createElement("p",null,s),l.default.createElement("div",null,a)))}componentDidMount(){this.postMessage({type:"get"}),this.postMessage({type:"possibleMoves"}),this.postMessage({type:"startPondering"})}componentWillUnmount(){this.worker.terminate()}_handleCellClick(e){var t,s,a;const l=this.activePlayer();null!=l&&("drafting"!==(null===(t=this.state.gameState)||void 0===t?void 0:t.modeType)?(null===(s=this.state.gameState)||void 0===s?void 0:s.board.penguins[l].includes(e))?this._toggleCellHighlight(e):null!=this.state.chosenCell&&(null===(a=this.state.possibleMoves)||void 0===a?void 0:a.includes(e))&&this._movePenguinToCell(e):this._placePenguin(e))}postMessage(e){console.log("sent request "+e.type),this.worker.postMessage(e)}onMessage(e){const t=e.data;switch(t.type){case"possibleMoves":this.setState({possibleMoves:t.possibleMoves});break;case"state":this.setState({gameState:t.gameState}),this.postMessage({type:"possibleMoves"}),t.gameState.activePlayer===o.BOT_PLAYER&&this.postMessage({type:"takeAction"});break;case"illegalMove":case"illegalPlacement":this.setState({lastMoveInvalid:!0})}}_placePenguin(e){this.postMessage({type:"place",dst:e})}_movePenguinToCell(e){this.state.chosenCell&&this.postMessage({type:"move",src:this.state.chosenCell,dst:e})}_toggleCellHighlight(e){if(this.state.chosenCell===e)return this.setState({chosenCell:void 0}),void this.postMessage({type:"possibleMoves"});this.postMessage({type:"possibleMoves",src:e}),this.setState({chosenCell:e})}}n.default.render(l.default.createElement(r,null),document.getElementById("root"))},209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PONDER_INTERVAL_MS=t.MAX_PLAYOUTS=t.PLAYOUT_MS=t.PLAYER_COLORS=t.NUM_CELLS=t.ODD_ROW_LEN=t.EVEN_ROW_LEN=t.NUM_ROWS=t.BOT_PLAYER=t.HUMAN_PLAYER=t.NPLAYERS=void 0,t.NPLAYERS=2,t.HUMAN_PLAYER=0,t.BOT_PLAYER=1,t.NUM_ROWS=8,t.EVEN_ROW_LEN=7,t.ODD_ROW_LEN=8,t.NUM_CELLS=60,t.PLAYOUT_MS=100,t.PONDER_INTERVAL_MS=0,t.MAX_PLAYOUTS=6e3,t.PLAYER_COLORS=["blue","red","orange","green"]}}]);