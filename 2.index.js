(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[,function(e,t,s){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(s(2)),l=a(s(6)),i=a(s(10)),o=a(s(11)),r=s(3);class c extends n.default.Component{constructor(e){super(e),this.handleCellClick=this._handleCellClick.bind(this),this.worker=new i.default,this.worker.onmessage=this.onMessage.bind(this),this.state={}}activePlayer(){var e;return null===(e=this.state.gameState)||void 0===e?void 0:e.activePlayer}render(){var e,t;const s=this.state.lastMoveInvalid?"Invalid move!":null,a=[],l=this.activePlayer();for(let t=0;t<r.NPLAYERS;++t){let s={color:r.PLAYER_COLORS[t]},i=l===t?"(Active Player)":null;a.push(n.default.createElement("p",{key:"score_"+t},n.default.createElement("span",{style:s},"Score: ",null===(e=this.state.gameState)||void 0===e?void 0:e.scores[t]," ",i)))}let i=null;return this.state.gameState&&(i=n.default.createElement(o.default,{gameState:this.state.gameState,possibleMoves:this.state.possibleMoves||[],chosenCell:this.state.chosenCell,handleCellClick:this.handleCellClick})),n.default.createElement("div",{className:"app"},i,n.default.createElement("div",{className:"info-col"},n.default.createElement("p",null,null===(t=this.state.gameState)||void 0===t?void 0:t.modeType),n.default.createElement("p",null,s),n.default.createElement("div",null,a)))}componentDidMount(){this.postMessage({type:"get"}),this.postMessage({type:"possibleMoves"}),this.postMessage({type:"startPondering"})}componentWillUnmount(){this.worker.terminate()}_handleCellClick(e){var t,s,a;const n=this.activePlayer();null!=n&&("drafting"!==(null===(t=this.state.gameState)||void 0===t?void 0:t.modeType)?(null===(s=this.state.gameState)||void 0===s?void 0:s.board.penguins[n].includes(e))?this._toggleCellHighlight(e):null!=this.state.chosenCell&&(null===(a=this.state.possibleMoves)||void 0===a?void 0:a.includes(e))&&this._movePenguinToCell(e):this._placePenguin(e))}postMessage(e){console.log("sent request "+e.type),this.worker.postMessage(e)}onMessage(e){const t=e.data;switch(t.type){case"possibleMoves":this.setState({possibleMoves:t.possibleMoves});break;case"state":this.setState({gameState:t.gameState}),this.postMessage({type:"possibleMoves"}),t.gameState.activePlayer===r.BOT_PLAYER&&this.postMessage({type:"takeAction"});break;case"illegalMove":case"illegalPlacement":this.setState({lastMoveInvalid:!0})}}_placePenguin(e){this.postMessage({type:"place",dst:e})}_movePenguinToCell(e){this.state.chosenCell&&this.postMessage({type:"move",src:this.state.chosenCell,dst:e})}_toggleCellHighlight(e){if(this.state.chosenCell===e)return this.setState({chosenCell:void 0}),void this.postMessage({type:"possibleMoves"});this.postMessage({type:"possibleMoves",src:e}),this.setState({chosenCell:e})}}l.default.render(n.default.createElement(c,null),document.getElementById("root"))},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PONDER_INTERVAL_MS=t.MAX_PLAYOUTS=t.PLAYOUT_MS=t.PLAYER_COLORS=t.NUM_CELLS=t.ODD_ROW_LEN=t.EVEN_ROW_LEN=t.NUM_ROWS=t.BOT_PLAYER=t.HUMAN_PLAYER=t.NPLAYERS=void 0;t.NPLAYERS=2;t.HUMAN_PLAYER=0;t.BOT_PLAYER=1;t.NUM_ROWS=8;t.EVEN_ROW_LEN=7;t.ODD_ROW_LEN=8;t.NUM_CELLS=60;t.PLAYOUT_MS=100;t.PONDER_INTERVAL_MS=0;t.MAX_PLAYOUTS=6e3;t.PLAYER_COLORS=["blue","red","orange","green"]},,,,,,,function(e,t,s){"use strict";s.r(t),t.default=function(){return new Worker(s.p+"index.worker.js")}},function(e,t,s){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,s,a){void 0===a&&(a=s),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,a){void 0===a&&(a=s),e[a]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&a(t,e,s);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=l(s(2)),r=i(s(12)),c=s(3);t.default=o.memo((function(e){const t=new Map;for(let s of[c.HUMAN_PLAYER,c.BOT_PLAYER])for(let a of e.gameState.board.penguins[s])t.set(a,s);const s=e.possibleMoves.length>0,a=new Set([]);for(let t of e.gameState.board.claimed)for(let e of t)a.add(e);const n=[];for(let l=0;l<c.NUM_ROWS;++l){const i=125+1.5*l*62.5,u=l%2==0?c.EVEN_ROW_LEN:c.ODD_ROW_LEN,h=l%2*-1*Math.sqrt(3)*62.5/2;for(let l=0;l<u;++l){const c=125+l*(62.5*(Math.sin(Math.PI/3)-Math.sin(5*Math.PI/3)))+h,u=n.length,d=e.gameState.board.fish[u],f=e.possibleMoves.includes(u),m=s&&e.chosenCell===u;n.push(o.createElement(r.default,{key:u,_key:u,onClick:e.handleCellClick,fish:d,cx:c,cy:i,sideLength:62.5,highlighted:m,possible:f,player:t.get(u),claimed:a.has(u)}))}}return o.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",className:"board",viewBox:"0 0 1000 1000"},n)}))},function(e,t,s){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,s,a){void 0===a&&(a=s),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,a){void 0===a&&(a=s),e[a]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&a(t,e,s);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=l(s(2)),r=i(s(13));function c(e){const t=[];for(let s=0;s<6;++s)t.push(u(e,s));return t}function u(e,t){const s=e.sideLength,a=t*Math.PI/3;return[s*Math.sin(a),s*Math.cos(a)]}t.default=o.memo((function(e){const t=`translate(${e.cx},${e.cy})`,s=e.player;if(null==s&&e.claimed)return o.createElement("g",{transform:t},o.createElement("polygon",{points:c(e).join(" "),className:"cell claimed"}));let a=null,n=null;null!=s?a=o.createElement(r.default,{player:s,size:e.sideLength}):n=function(e){const t=e.sideLength/10;if(1===e.fish)return[o.createElement("circle",{key:0,className:"fish",r:t})];if(2===e.fish)return[o.createElement("circle",{key:0,className:"fish",cx:2*-t,r:t}),o.createElement("circle",{key:1,className:"fish",cx:2*t,r:t})];if(3===e.fish){const e=2*t*Math.sin(Math.PI/3);return[o.createElement("circle",{key:0,className:"fish",cx:2*-t,cy:e,r:t}),o.createElement("circle",{key:1,className:"fish",cx:2*t,cy:e,r:t}),o.createElement("circle",{key:2,className:"fish",cx:0,cy:-e,r:t})]}throw new Error(e.fish+" is not a valid fish amount")}(e);const l=["cell"];return e.highlighted?l.push("highlighted"):e.possible&&l.push("possible"),o.createElement("g",{transform:t,onClick:()=>e.onClick(e._key)},o.createElement("polygon",{className:l.join(" "),points:c(e).join(" ")}),n,a)}))},function(e,t,s){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,s,a){void 0===a&&(a=s),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,a){void 0===a&&(a=s),e[a]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&a(t,e,s);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(s(2)),o=s(3);t.default=i.memo((function(e){let t=void 0;e.player==o.HUMAN_PLAYER?t="human":e.player==o.BOT_PLAYER&&(t="bot");const s="penguin "+t,a=e.size/500;return i.createElement("g",{transform:`scale(${a}),translate(-307.62496,-350)`},i.createElement("g",{transform:"matrix(2.0165499,0,0,2.0165499,-378.20444,-374.28247)"},i.createElement("g",{transform:"translate(0,-14)",className:"penguin leftFoot"},i.createElement("rect",{className:"penguin foot",width:"18.182745",height:"72.73098",x:"340.37064",y:"378.86526"}),i.createElement("path",{className:"penguin foot",d:"m 347.12481,446.95339 -60.42857,21.85714 45.71428,18.57143 26.14286,-35.78572 z"})),i.createElement("g",{transform:"matrix(-1,0,0,1,745.35258,-14)",className:"penguin rightFoot"},i.createElement("rect",{y:"378.86526",x:"340.37064",height:"72.73098",width:"18.182745",className:"penguin foot"}),i.createElement("path",{d:"m 347.12481,446.95339 -60.42857,21.85714 45.71428,18.57143 26.14286,-35.78572 z",className:"penguin foot"})),i.createElement("path",{transform:"matrix(0.59003831,0,0,0.59003831,186.08628,108.73722)",d:"m 446.48743,416.47116 c 0,72.80489 -58.79389,131.82491 -131.31983,131.82491 -72.52593,0 -131.31982,-59.02002 -131.31982,-131.82491 0,-72.80488 58.79389,-131.8249 131.31982,-131.8249 72.52594,0 131.31983,59.02002 131.31983,131.8249 z",className:s}),i.createElement("path",{transform:"translate(59.910095,0)",d:"m 361.63462,289.69702 c 0,27.3367 -22.16077,49.49748 -49.49747,49.49748 -27.3367,0 -49.49748,-22.16078 -49.49748,-49.49748 0,-27.3367 22.16078,-49.49747 49.49748,-49.49747 27.3367,0 49.49747,22.16077 49.49747,49.49747 z",className:s}),i.createElement("path",{d:"m 345.78328,275.11088 c 0,0 6.9297,-6 26.26396,-6 19.33426,0 26.26397,6 26.26397,6 l -26.26397,52.52793 z",className:"penguin beak"}),i.createElement("path",{transform:"translate(0,-8)",className:"penguin eyes",d:"m 369.46331,266.71603 c 0,5.43945 -4.40955,9.84899 -9.84899,9.84899 -5.43945,0 -9.84899,-4.40954 -9.84899,-9.84899 0,-5.43944 4.40954,-9.84898 9.84899,-9.84898 5.43944,0 9.84899,4.40954 9.84899,9.84898 z"}),i.createElement("path",{transform:"translate(0,-8)",d:"m 391.93917,269.36768 c 0,3.55656 -2.88316,6.43972 -6.43972,6.43972 -3.55656,0 -6.43972,-2.88316 -6.43972,-6.43972 0,-3.55656 2.88316,-6.43973 6.43972,-6.43973 3.55656,0 6.43972,2.88317 6.43972,6.43973 z",className:"penguin eyes"}),i.createElement("path",{d:"M 332.14074,297.03867 247.29889,260.5461 c 10.94712,32.37883 32.49618,64.01962 75.63693,75.93783 z",className:s}),i.createElement("path",{className:s,d:"M 411.95375,297.03867 496.7956,260.5461 c -10.94712,32.37883 -32.49618,64.01962 -75.63693,75.93783 z"})))}))}]]);