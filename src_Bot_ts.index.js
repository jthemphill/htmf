/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunkhtmf"] = globalThis["webpackChunkhtmf"] || []).push([["src_Bot_ts"],{

/***/ "../pkg/htmf_wasm_bg.js":
/*!******************************!*\
  !*** ../pkg/htmf_wasm_bg.js ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Game\": () => /* binding */ Game,\n/* harmony export */   \"MoveInfo\": () => /* binding */ MoveInfo,\n/* harmony export */   \"__wbindgen_string_new\": () => /* binding */ __wbindgen_string_new,\n/* harmony export */   \"__wbg_new_59cb74e423758ede\": () => /* binding */ __wbg_new_59cb74e423758ede,\n/* harmony export */   \"__wbg_stack_558ba5917b466edd\": () => /* binding */ __wbg_stack_558ba5917b466edd,\n/* harmony export */   \"__wbg_error_4bb6c2a97407129a\": () => /* binding */ __wbg_error_4bb6c2a97407129a,\n/* harmony export */   \"__wbindgen_object_drop_ref\": () => /* binding */ __wbindgen_object_drop_ref,\n/* harmony export */   \"__wbg_getRandomValues_11115a852729f4e8\": () => /* binding */ __wbg_getRandomValues_11115a852729f4e8,\n/* harmony export */   \"__wbg_randomFillSync_a2d002fc3b8e30f7\": () => /* binding */ __wbg_randomFillSync_a2d002fc3b8e30f7,\n/* harmony export */   \"__wbg_self_a5f0fe5564782787\": () => /* binding */ __wbg_self_a5f0fe5564782787,\n/* harmony export */   \"__wbg_static_accessor_MODULE_7f278c5446c126c8\": () => /* binding */ __wbg_static_accessor_MODULE_7f278c5446c126c8,\n/* harmony export */   \"__wbg_require_29e58b5f6f133563\": () => /* binding */ __wbg_require_29e58b5f6f133563,\n/* harmony export */   \"__wbg_crypto_d91429ea1a087f70\": () => /* binding */ __wbg_crypto_d91429ea1a087f70,\n/* harmony export */   \"__wbg_msCrypto_c8be2bb4fc7d8cd3\": () => /* binding */ __wbg_msCrypto_c8be2bb4fc7d8cd3,\n/* harmony export */   \"__wbindgen_is_undefined\": () => /* binding */ __wbindgen_is_undefined,\n/* harmony export */   \"__wbindgen_throw\": () => /* binding */ __wbindgen_throw,\n/* harmony export */   \"__wbindgen_rethrow\": () => /* binding */ __wbindgen_rethrow\n/* harmony export */ });\n/* harmony import */ var _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./htmf_wasm_bg.wasm */ \"../pkg/htmf_wasm_bg.wasm\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(_htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction getObject(idx) { return heap[idx]; }\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer) {\n        cachegetInt32Memory0 = new Int32Array(_htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer);\n    }\n    return cachegetInt32Memory0;\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst lTextEncoder = typeof TextEncoder === 'undefined' ? (0, module.require)('util').TextEncoder : TextEncoder;\n\nlet cachedTextEncoder = new lTextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nfunction handleError(f) {\n    return function () {\n        try {\n            return f.apply(this, arguments);\n\n        } catch (e) {\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_exn_store(addHeapObject(e));\n        }\n    };\n}\n/**\n*/\nclass Game {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Game.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_game_free(ptr);\n    }\n    /**\n    * @returns {Game}\n    */\n    static new() {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_new();\n        return Game.__wrap(ret);\n    }\n    /**\n    * @returns {boolean}\n    */\n    is_drafting() {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_is_drafting(this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {boolean}\n    */\n    finished_drafting() {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_finished_drafting(this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {boolean}\n    */\n    game_over() {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_game_over(this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {number | undefined}\n    */\n    active_player() {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_active_player(this.ptr);\n        return ret === 0xFFFFFF ? undefined : ret;\n    }\n    /**\n    * @param {number} player\n    * @returns {number}\n    */\n    score(player) {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_score(this.ptr, player);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    turn() {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_turn(this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @param {number} idx\n    * @returns {number}\n    */\n    num_fish(idx) {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_num_fish(this.ptr, idx);\n        return ret >>> 0;\n    }\n    /**\n    * @param {number} player\n    * @returns {Uint8Array}\n    */\n    penguins(player) {\n        try {\n            const retptr = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value - 16;\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value = retptr;\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_penguins(retptr, this.ptr, player);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v0 = getArrayU8FromWasm0(r0, r1).slice();\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_free(r0, r1 * 1);\n            return v0;\n        } finally {\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value += 16;\n        }\n    }\n    /**\n    * @param {number} player\n    * @returns {Uint8Array}\n    */\n    claimed(player) {\n        try {\n            const retptr = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value - 16;\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value = retptr;\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_claimed(retptr, this.ptr, player);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v0 = getArrayU8FromWasm0(r0, r1).slice();\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_free(r0, r1 * 1);\n            return v0;\n        } finally {\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value += 16;\n        }\n    }\n    /**\n    * @returns {Uint8Array}\n    */\n    draftable_cells() {\n        try {\n            const retptr = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value - 16;\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value = retptr;\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_draftable_cells(retptr, this.ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v0 = getArrayU8FromWasm0(r0, r1).slice();\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_free(r0, r1 * 1);\n            return v0;\n        } finally {\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value += 16;\n        }\n    }\n    /**\n    * @param {number} src\n    * @returns {Uint8Array}\n    */\n    possible_moves(src) {\n        try {\n            const retptr = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value - 16;\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value = retptr;\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_possible_moves(retptr, this.ptr, src);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v0 = getArrayU8FromWasm0(r0, r1).slice();\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_free(r0, r1 * 1);\n            return v0;\n        } finally {\n            _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_export_0.value += 16;\n        }\n    }\n    /**\n    * @param {number} dst\n    */\n    place_penguin(dst) {\n        _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_place_penguin(this.ptr, dst);\n    }\n    /**\n    * @param {number} src\n    * @param {number} dst\n    */\n    move_penguin(src, dst) {\n        _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_move_penguin(this.ptr, src, dst);\n    }\n    /**\n    */\n    playout() {\n        _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_playout(this.ptr);\n    }\n    /**\n    *\n    *     * Number of times we've tried and won by placing a penguin at `dst` on the current board\n    *\n    * @param {number} dst\n    * @returns {MoveInfo}\n    */\n    place_info(dst) {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_place_info(this.ptr, dst);\n        return MoveInfo.__wrap(ret);\n    }\n    /**\n    *\n    *     * Number of times we've tried and won by moving a penguin from `src` to `dst` on the current\n    *     * board\n    *\n    * @param {number} src\n    * @param {number} dst\n    * @returns {MoveInfo}\n    */\n    move_info(src, dst) {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_move_info(this.ptr, src, dst);\n        return MoveInfo.__wrap(ret);\n    }\n    /**\n    */\n    take_action() {\n        _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.game_take_action(this.ptr);\n    }\n}\n/**\n*/\nclass MoveInfo {\n\n    static __wrap(ptr) {\n        const obj = Object.create(MoveInfo.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_moveinfo_free(ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    get_visits() {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.moveinfo_get_visits(this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {number}\n    */\n    get_rewards() {\n        var ret = _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.moveinfo_get_rewards(this.ptr);\n        return ret;\n    }\n}\n\nconst __wbindgen_string_new = function(arg0, arg1) {\n    var ret = getStringFromWasm0(arg0, arg1);\n    return addHeapObject(ret);\n};\n\nconst __wbg_new_59cb74e423758ede = function() {\n    var ret = new Error();\n    return addHeapObject(ret);\n};\n\nconst __wbg_stack_558ba5917b466edd = function(arg0, arg1) {\n    var ret = getObject(arg1).stack;\n    var ptr0 = passStringToWasm0(ret, _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc, _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len0;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n};\n\nconst __wbg_error_4bb6c2a97407129a = function(arg0, arg1) {\n    try {\n        console.error(getStringFromWasm0(arg0, arg1));\n    } finally {\n        _htmf_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_free(arg0, arg1);\n    }\n};\n\nconst __wbindgen_object_drop_ref = function(arg0) {\n    takeObject(arg0);\n};\n\nconst __wbg_getRandomValues_11115a852729f4e8 = handleError(function(arg0, arg1, arg2) {\n    getObject(arg0).getRandomValues(getArrayU8FromWasm0(arg1, arg2));\n});\n\nconst __wbg_randomFillSync_a2d002fc3b8e30f7 = handleError(function(arg0, arg1, arg2) {\n    getObject(arg0).randomFillSync(getArrayU8FromWasm0(arg1, arg2));\n});\n\nconst __wbg_self_a5f0fe5564782787 = handleError(function() {\n    var ret = self.self;\n    return addHeapObject(ret);\n});\n\nconst __wbg_static_accessor_MODULE_7f278c5446c126c8 = function() {\n    var ret = module;\n    return addHeapObject(ret);\n};\n\nconst __wbg_require_29e58b5f6f133563 = handleError(function(arg0, arg1, arg2) {\n    var ret = getObject(arg0).require(getStringFromWasm0(arg1, arg2));\n    return addHeapObject(ret);\n});\n\nconst __wbg_crypto_d91429ea1a087f70 = function(arg0) {\n    var ret = getObject(arg0).crypto;\n    return addHeapObject(ret);\n};\n\nconst __wbg_msCrypto_c8be2bb4fc7d8cd3 = function(arg0) {\n    var ret = getObject(arg0).msCrypto;\n    return addHeapObject(ret);\n};\n\nconst __wbindgen_is_undefined = function(arg0) {\n    var ret = getObject(arg0) === undefined;\n    return ret;\n};\n\nconst __wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\nconst __wbindgen_rethrow = function(arg0) {\n    throw takeObject(arg0);\n};\n\n\n\n//# sourceURL=webpack://htmf/../pkg/htmf_wasm_bg.js?");

/***/ }),

/***/ "../pkg/htmf_wasm_bg.wasm":
/*!********************************!*\
  !*** ../pkg/htmf_wasm_bg.wasm ***!
  \********************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval("\"use strict\";\n// Instantiate WebAssembly module\nvar wasmExports = __webpack_require__.w[module.id];\n__webpack_require__.r(exports);\n// export exports from WebAssembly module\nfor(var name in wasmExports) if(name) exports[name] = wasmExports[name];\n// exec imports from WebAssembly module (for esm order)\n/* harmony import */ var m0 = __webpack_require__(/*! ./htmf_wasm_bg.js */ \"../pkg/htmf_wasm_bg.js\");\n\n\n// exec wasm module\nwasmExports[\"\"]()\n\n//# sourceURL=webpack://htmf/../pkg/htmf_wasm_bg.wasm?");

/***/ }),

/***/ "./src/Bot.ts":
/*!********************!*\
  !*** ./src/Bot.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => __WEBPACK_DEFAULT_EXPORT__\n/* harmony export */ });\n/* harmony import */ var htmf_wasm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! htmf-wasm */ \"../pkg/htmf_wasm_bg.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"./src/constants.ts\");\n\n\nfunction getGameState(game) {\n    const fish = [];\n    for (let idx = 0; idx < _constants__WEBPACK_IMPORTED_MODULE_0__.NUM_CELLS; ++idx) {\n        fish.push(game.num_fish(idx));\n    }\n    const scores = [];\n    const penguins = [];\n    const claimed = [];\n    for (let p = 0; p < _constants__WEBPACK_IMPORTED_MODULE_0__.NPLAYERS; ++p) {\n        scores.push(game.score(p));\n        penguins.push([...game.penguins(p)]);\n        claimed.push([...game.claimed(p)]);\n    }\n    return {\n        activePlayer: game.active_player(),\n        modeType: game.finished_drafting() ? \"playing\" : \"drafting\",\n        scores,\n        turn: game.turn(),\n        board: {\n            fish,\n            penguins,\n            claimed,\n        }\n    };\n}\nfunction getPossibleMoves(game, src) {\n    if (game.active_player() != _constants__WEBPACK_IMPORTED_MODULE_0__.HUMAN_PLAYER) {\n        return [];\n    }\n    if (game.finished_drafting()) {\n        if (src !== undefined) {\n            return [...game.possible_moves(src)];\n        }\n        const active_player = game.active_player();\n        return active_player === undefined ? [] : [...game.penguins(active_player)];\n    }\n    else {\n        return [...game.draftable_cells()];\n    }\n}\nclass Bot {\n    constructor(postMessage) {\n        this.game = htmf_wasm__WEBPACK_IMPORTED_MODULE_1__.Game.new();\n        this.postMessage = postMessage;\n        this.nplayouts = 0;\n        this.ponder();\n    }\n    free() {\n        this.stopPondering();\n        this.game.free();\n    }\n    init() {\n        const postMessage = this.postMessage;\n        postMessage({\n            type: \"state\",\n            gameState: this.getState(),\n        });\n        postMessage({\n            type: \"possibleMoves\",\n            possibleMoves: this.getPossibleMoves(),\n        });\n    }\n    ponder() {\n        this.nplayouts = 0;\n        if (this.ponderer !== undefined) {\n            return;\n        }\n        this.ponderer = self.setInterval(() => {\n            if (this.nplayouts >= _constants__WEBPACK_IMPORTED_MODULE_0__.MAX_PLAYOUTS) {\n                this.stopPondering();\n                return;\n            }\n            const t0 = performance.now();\n            while (performance.now() - t0 < _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYOUT_MS) {\n                this.playout();\n            }\n            let activePlayer = this.game.active_player();\n            if (activePlayer !== undefined) {\n                if (this.game.is_drafting()) {\n                    this.postPlaceScores(activePlayer);\n                }\n                else {\n                    this.postMoveScores(activePlayer);\n                }\n            }\n            // console.log(`Finished ${nplayouts} in ${performance.now() - t0} ms.`);\n        }, _constants__WEBPACK_IMPORTED_MODULE_0__.PONDER_INTERVAL_MS);\n    }\n    stopPondering() {\n        if (this.ponderer !== undefined) {\n            self.clearInterval(this.ponderer);\n            this.ponderer = undefined;\n        }\n    }\n    placePenguin(dst) {\n        this.game.place_penguin(dst);\n        this.ponder();\n    }\n    movePenguin(src, dst) {\n        this.game.move_penguin(src, dst);\n        this.ponder();\n    }\n    playout() {\n        this.game.playout();\n        ++this.nplayouts;\n    }\n    takeAction() {\n        this.stopPondering();\n        while (this.nplayouts < _constants__WEBPACK_IMPORTED_MODULE_0__.MIN_PLAYOUTS) {\n            this.playout();\n        }\n        this.game.take_action();\n        this.ponder();\n    }\n    getState() {\n        return getGameState(this.game);\n    }\n    getPossibleMoves(src) {\n        return getPossibleMoves(this.game, src);\n    }\n    onMessage(request) {\n        console.log(`received request ${request.type}`);\n        switch (request.type) {\n            case \"get\":\n                this.postGameState();\n                break;\n            case \"move\":\n                try {\n                    this.movePenguin(request.src, request.dst);\n                    this.postGameState();\n                }\n                catch (err) {\n                    this.postIllegalMove(request.src, request.dst);\n                }\n                break;\n            case \"place\":\n                try {\n                    this.placePenguin(request.dst);\n                    this.postGameState();\n                }\n                catch (err) {\n                    this.postIllegalPlacement(request.dst);\n                }\n                break;\n            case \"possibleMoves\":\n                this.postPossibleMoves(request.src);\n                break;\n            case \"takeAction\":\n                this.takeAction();\n                this.postGameState();\n                break;\n        }\n    }\n    postIllegalMove(src, dst) {\n        const postMessage = this.postMessage;\n        postMessage({\n            type: \"illegalMove\",\n            src,\n            dst,\n        });\n    }\n    postIllegalPlacement(dst) {\n        const postMessage = this.postMessage;\n        postMessage({\n            type: \"illegalPlacement\",\n            dst,\n        });\n    }\n    postPossibleMoves(src) {\n        const postMessage = this.postMessage;\n        postMessage({\n            type: \"possibleMoves\",\n            possibleMoves: this.getPossibleMoves(src),\n        });\n    }\n    postGameState() {\n        const postMessage = this.postMessage;\n        postMessage({\n            type: \"state\",\n            gameState: this.getState(),\n        });\n    }\n    postPlaceScores(activePlayer) {\n        const placeScores = [];\n        for (let dst of this.game.draftable_cells()) {\n            const info = this.game.place_info(dst);\n            placeScores.push({\n                dst,\n                visits: info.get_visits(),\n                rewards: info.get_rewards(),\n            });\n        }\n        const postMessage = this.postMessage;\n        postMessage({\n            type: \"placeScores\",\n            activePlayer,\n            placeScores,\n        });\n    }\n    postMoveScores(activePlayer) {\n        const moveScores = [];\n        for (let src of this.game.penguins(activePlayer)) {\n            for (let dst of this.game.possible_moves(src)) {\n                const info = this.game.move_info(src, dst);\n                moveScores.push({\n                    src,\n                    dst,\n                    visits: info.get_visits(),\n                    rewards: info.get_rewards(),\n                });\n            }\n        }\n        const postMessage = this.postMessage;\n        postMessage({\n            type: \"moveScores\",\n            activePlayer,\n            moveScores,\n        });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Bot);\n\n\n//# sourceURL=webpack://htmf/./src/Bot.ts?");

/***/ }),

/***/ "./src/constants.ts":
/*!**************************!*\
  !*** ./src/constants.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NPLAYERS\": () => /* binding */ NPLAYERS,\n/* harmony export */   \"HUMAN_PLAYER\": () => /* binding */ HUMAN_PLAYER,\n/* harmony export */   \"BOT_PLAYER\": () => /* binding */ BOT_PLAYER,\n/* harmony export */   \"NUM_ROWS\": () => /* binding */ NUM_ROWS,\n/* harmony export */   \"EVEN_ROW_LEN\": () => /* binding */ EVEN_ROW_LEN,\n/* harmony export */   \"ODD_ROW_LEN\": () => /* binding */ ODD_ROW_LEN,\n/* harmony export */   \"NUM_CELLS\": () => /* binding */ NUM_CELLS,\n/* harmony export */   \"PLAYOUT_MS\": () => /* binding */ PLAYOUT_MS,\n/* harmony export */   \"MIN_PLAYOUTS\": () => /* binding */ MIN_PLAYOUTS,\n/* harmony export */   \"MAX_PLAYOUTS\": () => /* binding */ MAX_PLAYOUTS,\n/* harmony export */   \"PONDER_INTERVAL_MS\": () => /* binding */ PONDER_INTERVAL_MS\n/* harmony export */ });\nconst NPLAYERS = 2;\nconst HUMAN_PLAYER = 0;\nconst BOT_PLAYER = 1;\nconst NUM_ROWS = 8;\nconst EVEN_ROW_LEN = 7;\nconst ODD_ROW_LEN = 8;\nconst NUM_CELLS = EVEN_ROW_LEN * (NUM_ROWS / 2) + ODD_ROW_LEN * (NUM_ROWS / 2);\nconst PLAYOUT_MS = 100;\nconst PONDER_INTERVAL_MS = 0;\nconst MIN_PLAYOUTS = 6000;\nconst MAX_PLAYOUTS = 60000;\n\n\n\n//# sourceURL=webpack://htmf/./src/constants.ts?");

/***/ })

}]);